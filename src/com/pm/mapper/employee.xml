<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pm.dao.EmployeeDao"><!-- 后面接的是接口名称 -->
	<select id="getEmployee" resultType="java.util.Map"
		parameterType="java.util.Map">
		<if test="top == null and bottom == null">
			SELECT e.*,d.name d_name
			FROM t_employee e left join t_dept d
			on e.d_id=d.d_id
		</if>
		<if test="top!=null">
		    <![CDATA[
		    select * from(
				select t.*,rownum rnum from(
					SELECT p.*,d.name d_name
					FROM t_employee p
					LEFT JOIN t_dept d
					on p.d_id = d.d_id )t where rownum<=#{top}) 
			p where p.rnum>#{bottom}
			]]>
		</if>
	</select>

	<select id="getEmployeeById" resultType="com.pm.pojo.Employee"
		parameterType="java.lang.String">
		SELECT *
		FROM t_employee
		WHERE E_ID = #{e_id}
	</select>

	<select id="getPeople" resultType="java.util.Map" parameterType="java.util.Map">
		<if test="top == null">
			SELECT p.*,d.name d_name
			FROM t_people p
			LEFT JOIN t_dept d
			on p.d_id = d.d_id
		</if>
		<if test="top != null and bottom != null">
		    <![CDATA[
			select * from(
				select t.*,rownum rnum from(
					SELECT p.*,d.name d_name
					FROM t_people p
					LEFT JOIN t_dept d
					on p.d_id = d.d_id )t where rownum<=#{top}) 
			p where p.rnum>#{bottom}
			]]>
		</if>
	</select>
	<select id="getPeopleFY" resultType="java.util.Map"
		parameterType="java.util.Map">

	</select>

	<select id="getPeopleById" resultType="java.util.Map"
		parameterType="java.lang.String">
		SELECT p.*,d.name d_name,decode(sex,1,'男',2,'女') psex
			FROM t_people p
			LEFT JOIN t_dept d
			on p.d_id = d.d_id
		WHERE p_ID = #{p_id}
	</select>
	
	<delete id="deletePeople" parameterType="java.lang.String">
	    delete from t_people
	    where p_id=#{p_id}
	</delete>
</mapper>





































